{% extends '::base.html.twig' %}

{% block content %}
    <div class="developer">

        <h1>Manage Clients</h1>

        <h4>Create a New Client</h4>

        {{ form_start(form) }}
        {{ form_widget(form) }}
            <input type="submit" value="Create Client" class="btn--submit yellow">
        {{ form_end(form) }}

        <h4>Current Clients</h4>
        {% if clients %}
            {% for client in clients %}
                <div class="accordion">
                    <div class="accordion__item">
                        <div class="accordion__header">
                            <span class="application-name">Application Name:</span>
                            <p>{{ client.applicationName }}</p>
                        </div>
                        <div class="accordion__body">
                            <table>
                                <tr>
                                    <td class="heading">Client ID</td>
                                    <td>{{ client.randomId }}</td>
                                </tr>
                                <tr>
                                    <td class="heading">Client Secret</td>
                                    <td>{{ client.secret }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="link__container">
                        {{ app.request.getSchemeAndHttpHost() }}{{ path('fos_oauth_server_token', { 'grant_type': 'client_credentials', 'client_id': client.id ~ '_' ~ client.randomId, 'client_secret': client.secret }) }}
                    </div>

                </div>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}